{% extends "base.html" %} {% block extrahead %}
<!-- Prevent search engine indexing -->
<meta name="robots" content="noindex, nofollow" />

<!-- Netlify Identity Widget -->
<script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>
{% endblock %} {% block scripts %} {{ super() }}

<!-- Netlify Identity Login Logic -->
<script>
  if (window.netlifyIdentity) {
    const handleLogin = () => {
      // Remove the temporary listener so we only reload once per login.
      window.netlifyIdentity.off("login", handleLogin);
      window.netlifyIdentity.close();
      window.location.reload();
    };

    window.netlifyIdentity.on("init", (user) => {
      if (!user) {
        // Defer attaching the login handler until we actually need a login.
        window.netlifyIdentity.on("login", handleLogin);
        window.netlifyIdentity.open();
      }
    });

    window.netlifyIdentity.on("logout", () => {
      window.netlifyIdentity.close();
      window.location.reload();
    });

    window.netlifyIdentity.init();
  }
</script>
{% endblock %}
